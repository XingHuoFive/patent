<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.sxp.patMag.dao.PatentMapper">

    <resultMap id="PatentMap" type="com.sxp.patMag.entity.Patent">
        <id column="patent_id" property="patentId"/>
        <result column="case_number" property="caseNumber"/>
        <result column="patent_schedule" property="patentSchedule"/>
        <result column="apply_time" property="applyTime"/>
        <result column="create_person" property="createPerson"/>
        <result column="write_person" property="writePerson"/>
        <collection property="indicatorList" ofType="com.sxp.patMag.entity.Indicator">
            <id column="indicator_id" property="indicatorId"/>
            <result column="indicator_name" property="indicatorName"/>
            <result column="patent_id" property="patentId"/>
        </collection>
    </resultMap>

    <select id="getPatentList" resultType="com.sxp.patMag.entity.IndicatorExport">
        SELECT
            p.patent_id patentId,
            i.indicator_name indicatorName,
            p.case_number caseNumber,
            p.patent_schedule patentSchedule,
            p.apply_time applyTime,
            p.create_person createPerson,
            p.write_person writePerson
        FROM  tb_patent p
        RIGHT JOIN tb_indicator i
        ON i.patent_id = p.patent_id
    </select>

    <select id="selectById" parameterType="java.lang.String"  resultType="com.sxp.patMag.entity.Patent" >
        select *   from  tb_patent   where  patent_id  = #{patentId}
    </select>

    <select id="getPatentListByVO" resultType="com.sxp.patMag.entity.IndicatorExport">
        SELECT
            p.patent_id patentId,
            i.indicator_name indicatorName,
            p.case_number caseNumber,
            p.patent_schedule patentSchedule,
            p.apply_time applyTime,
            p.create_person createPerson,
            p.write_person writePerson
        FROM  tb_patent p
        RIGHT JOIN tb_indicator i
        ON i.patent_id = p.patent_id WHERE 1=1
        <trim prefix="AND" suffixOverrides="AND">
            <if test="indicatorName != null">
                indicator_name = #{indicatorName} AND
            </if>
            <if test="caseNumber != null">
                case_number = #{caseNumber} AND
            </if>
            <if test="patentSchedule != null">
                patent_schedule = #{patentSchedule} AND
            </if>
            <if test="applyTime != null">
                apply_time = #{applyTime} AND
            </if>
            <if test="createPerson != null">
                create_person = #{createPerson} AND
            </if>
            <if test="writePerson != null">
                write_person = #{writePerson} AND
            </if>
            <if test="applyNumber != null">
                apply_number = #{applyNumber}
            </if>
        </trim>
    </select>


</mapper>